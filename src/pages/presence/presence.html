<ion-header>
	<ion-icon (click)="goHome()" class='homeIcon' name="md-home"></ion-icon>
	<h1 (click)="goHome()" id="ptitle">Timmerdorp</h1>
	<ion-navbar>
		<ion-title>
			<img (click)="goHome()" src="assets/imgs/logo.png" class="nav-logo">
		</ion-title>
	</ion-navbar>
</ion-header>

<ion-content padding>
	<div class="container">
		<div class="bracelet-number">
			<h1>Aanwezigheid</h1>
			<ion-item>
				<ion-input #nrInput type="tel" placeholder="Zoek op nummer" maxlength="3" [(ngModel)]="number"
					(ngModelChange)="getChild($event)"></ion-input>
			</ion-item>
		</div>
	</div>
	<div class="user-info">
		<span *ngIf="!loginError&&!notLoggedIn" style="color:red;font-weight:bold">
			{{error}}
		</span>
		<span *ngIf="loginError" style="color:red;font-weight:bold">
			Login-gegevens onjuist. <a (click)='toLogin()'>Aanpassen</a>
		</span>
		<span *ngIf="notLoggedIn" style="color:red;font-weight:bold">
			Je moet eerst <a (click)='toLogin()'>inloggen</a>!
		</span>
		<div style='height: 20px;'>
			<div *ngIf="loading&&!notLoggedIn">
				<ion-spinner color='primary'></ion-spinner>
			</div>
		</div>
	</div>
	<div *ngFor="let child of tickets; let i = index">
		<h1 style='font-size: 1.5em;text-align:center;'>{{ child.meta.WooCommerceEventsAttendeeName[0] }}
			{{ child.meta.WooCommerceEventsAttendeeLastName[0] }} &mdash; {{ child.meta.wristband ||
					'-' }}<div style='display: inline-block' *ngIf='(child.meta.hutnr||[])[0]'> &mdash; hutnummer:
				<span *ngIf="child.meta.hutnr[0][0] === '0'"
					style="background-color:yellow;padding: 0px 3px">{{child.meta.hutnr}}</span>
				<span *ngIf="child.meta.hutnr[0][0] === '1'"
					style="background-color:red;color:white;padding: 0px 3px">{{child.meta.hutnr}}</span>
				<span *ngIf="child.meta.hutnr[0][0] === '2'"
					style="background-color:blue;color:white;padding: 0px 3px">{{child.meta.hutnr}}</span>
				<span *ngIf="child.meta.hutnr[0][0] === '3'"
					style="background-color:green;color:white;padding: 0px 3px">{{child.meta.hutnr}}</span>
			</div>
		</h1>

		<ion-list>
			<ion-item>
				<ion-label>Dinsdag</ion-label>
				<ion-toggle [(ngModel)]="+(tickets[i].meta.present_tue||[])[0]"
					(ionChange)="togglePresence(tickets[i], 'tue')"></ion-toggle>
			</ion-item>

			<ion-item>
				<ion-label>Woensdag</ion-label>
				<ion-toggle [(ngModel)]="+(tickets[i].meta.present_wed||[])[0]"
					(ionChange)="togglePresence(tickets[i], 'wed')"></ion-toggle>
			</ion-item>

			<ion-item>
				<ion-label>Donderdag</ion-label>
				<ion-toggle [(ngModel)]="+(tickets[i].meta.present_thu||[])[0]"
					(ionChange)="togglePresence(tickets[i], 'thu')"></ion-toggle>
			</ion-item>

			<ion-item>
				<ion-label>Vrijdag</ion-label>
				<ion-toggle [(ngModel)]="+(tickets[i].meta.present_fri||[])[0]"
					(ionChange)="togglePresence(tickets[i], 'fri')"></ion-toggle>
			</ion-item>
		</ion-list>
	</div>

</ion-content>