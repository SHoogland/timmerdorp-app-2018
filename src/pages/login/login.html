<ion-content padding>
  <div class='content main-content'>
    <div *ngIf='hideLogin'>
      <h1 style="font-size: 3.5rem!important;">Welkom bij de Timmerdorp app!</h1>
      <div class="user-info errorCard hasError" id='warning' style="width: 90%; background: #07497e!important;">
        <div class="content">
          <table>
            <tr>
              <td>
                <ion-icon style="padding-left: 4px; padding-right: 4px;" name="alert"></ion-icon>
              </td>
              <td>
                <h1 id='errorHeader'>Let op</h1>
                <h4 id='errorHelp' style="margin-bottom: 8px; line-height: 2rem;">
                  Deze app is alleen bedoeld voor de vrijwilligers van
                  Timmerdorp, niet voor ouders of deelnemers!
                  <br>
                </h4>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div style="width: 100%; text-align: center;">
        <button ion-button (click)='showLogin()'
          style="background: darkred; height: 60px; width: 180px; margin-top: 16px; margin-bottom: 16px; background: #053459; padding-left: 20px; padding-right: 20px;">
          <i class="material-icons" style="color: white; font-weight: bold; padding-right: 12px;">arrow_forward</i>
          Doorgaan
        </button>
      </div>
    </div>
    <div *ngIf="!hideLogin">
      <div *ngIf="loginPart">
        <h1>Inloggen</h1>
        <ion-list class="line-input">
          <ion-item>
            <ion-input class="ion-text-right" placeholder='E-mailadres' (keydown)="logInInput($event)"
              [(ngModel)]="(login || {}).username" autocomplete="email">
            </ion-input>
          </ion-item>
        </ion-list>
        <ion-list class="line-input">
          <ion-item>
            <ion-input class="ion-text-right" type='password' placeholder='Wachtwoord' (keydown)="logInInput($event)"
              [(ngModel)]="(login || {}).password" autocomplete="current-password">
            </ion-input>
          </ion-item>
        </ion-list>
        <button id='saveBtn' ion-button full style="background: #085592; border-radius: 6px;" (click)='loginNow()'>
          <ion-icon slot='start' name='md-log-in'>
          </ion-icon>
          <span>
            Inloggen
          </span>
        </button>
        <p (click)="forgotPassword()"
          style="color: white; text-decoration: underline; width: 100%; text-align: center;">Wachtwoord vergeten?</p>
        <div class="user-info" *ngIf="loading">
          <ion-spinner color='white'></ion-spinner>
        </div>
        <div [ngClass]="'user-info errorCard' + (error?' hasError':'')">
          <div class="content" *ngIf='error'>
            <ion-icon name='warning'></ion-icon>
            <h1 id='errorHeader' [innerHTML]='error'></h1>
            <h4 id='errorHelp' [innerHTML]='errorHelp'></h4>
          </div>
        </div>
        <div class="user-info errorCard hasError" id='warning'
          style="width: 80%; border-radius: 6px; background: #07497e!important;">
          <div class="content">
            <tr>
              <td>
                <ion-icon name="alert" style="font-size: 7rem;"></ion-icon>
              </td>
              <td>
                <h4 id='errorHelp' style="margin-bottom: 0px;">
                  Heb je al een account aangemaakt in de Timmerdorp-webshop, om bijvoorbeeld kaartjes te kopen voor je
                  kinderen? Log dan in met dat webshop-account. Ook accounts van vorig jaar zijn nog geldig!
                </h4>
              </td>
            </tr>
          </div>
        </div>
      </div>
      <div *ngIf="!loginPart">
        <h1>Registreren</h1>
        <ion-list class="line-input">
          <ion-item>
            <ion-input class="ion-text-right" placeholder='Voornaam' (keydown)="regInput($event)"
              [(ngModel)]="(register || {}).voornaam" autocomplete="given-name">
            </ion-input>
          </ion-item>
        </ion-list>
        <ion-list class="line-input" style="margin-bottom: 16px!important;">
          <ion-item>
            <ion-input class="ion-text-right" placeholder='Achternaam' (keydown)="regInput($event)"
              [(ngModel)]="(register || {}).achternaam" autocomplete="family-name">
            </ion-input>
          </ion-item>
        </ion-list>
        <ion-list class="line-input">
          <ion-item>
            <ion-input class="ion-text-right" placeholder='E-mailadres' (keydown)="regInput($event)"
              [(ngModel)]="(register || {}).username" autocomplete="email">
            </ion-input>
          </ion-item>
        </ion-list>
        <ion-list class="line-input">
          <ion-item>
            <ion-input class="ion-text-right" type='password' placeholder='Wachtwoord' (keydown)="regInput($event)"
              [(ngModel)]="(register || {}).password" autocomplete="new-password'">
            </ion-input>
          </ion-item>
        </ion-list>
        <button id='saveBtn' ion-button full style="background: #085592" (click)='registerNow()'>
          <ion-icon slot='start' name='md-log-in'>
          </ion-icon>
          <span>
            Registreren
          </span>
        </button>
        <div class="user-info" *ngIf="loading">
          <ion-spinner color='white'></ion-spinner>
        </div>
        <div [ngClass]="'user-info errorCard' + (error?' hasError':'')">
          <div class="content" *ngIf='error'>
            <ion-icon name='warning'></ion-icon>
            <h1 id='errorHeader' [innerHTML]='error'></h1>
            <h4 id='errorHelp' [innerHTML]='errorHelp'></h4>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!hideLogin" id="switchBar">
    <table>
      <td>
        <div (click)="loginPart = !loginPart; error = null;">
          <div>
            {{ loginPart ? "REGISTREREN" : "INLOGGEN" }}
          </div>
        </div>
      </td>
    </table>
  </div>

</ion-content>
