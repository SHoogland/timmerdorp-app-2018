<ion-content padding>
	<ion-header>
		<ion-icon (click)="goHome()" class='homeIcon' name="md-home"></ion-icon>
		<h1 (click)="goHome()" id="ptitle">Timmerdorp</h1>
		<ion-navbar>
			<ion-title>
				<img (click)="goHome()" src="assets/imgs/logo.png" class="nav-logo">
			</ion-title>
		</ion-navbar>
	</ion-header>
	<div class='content'>
		<div class="user-info">
			<span *ngIf="!loginError&&!notLoggedIn" style="color:red;font-weight:bold">
				{{error=="no ticket found"?"Geen ticket gevonden.":error}}
			</span>
			<span *ngIf="loginError" style="color:red;font-weight:bold">
				Login-gegevens onjuist. <a (click)='toLogin()'>Aanpassen</a>
			</span>
			<span *ngIf="notLoggedIn" style="color:red;font-weight:bold">
				Je moet eerst <a (click)='toLogin()'>inloggen</a>!
			</span>
			<div style='height: 20px;'>
				<div *ngIf="loading&&!notLoggedIn">
					<ion-spinner color='primary'></ion-spinner>
				</div>
			</div>
		</div>

		<div *ngIf="ticket.barcode.length > 0">
			<div class="user-info">
				<h1>Gegevens ticket</h1>
				<b>Naam: </b>{{ticket.firstName}} {{ticket.lastName}}
				<br><b>Ticket-barcode: </b>{{ticket.barcode}}
				<br><b>Geboortedatum: </b> {{ticket.birthDate}}
				<div *ngIf='ticket.hutNr'><b>Hutnummer: </b> {{ticket.hutNr}}</div>
			</div>
			<div class="bracelet-number">
				<h1>Armband nummer:</h1>
				<ion-item>
					<ion-input #nrInput type="tel" placeholder="123" [(ngModel)]="ticket.wristBandNr" maxlength="3">
					</ion-input>
				</ion-item>
				<span *ngIf="wristBandError" class="form-error">
					{{ wristBandError }}
				</span>
			</div>
		</div>
	</div>
	<button ion-button full (click)="goHome()" class="bg-red correction modern">Terug</button>
	<button *ngIf="ticket.wristBandNr.length > 2" ion-button full (click)="saveTicket()"
		class="bg-green correction modern">Opslaan </button>
</ion-content>

<div [ngClass]="{'shown': modal.showModal}" (click)="$event.target.id==='myModal'?closeModal():''" id="myModal"
	class="modal conditional">
	<div class="modal-content">
		<div id='modalTop' class='warnModal'>
		</div>
		<div id='modalBottom'>
			<span class="close" (click)="closeModal();">&times;</span>
			<h1>Waarschuwing</h1>
			<p>Dit ticket heeft al een armband!</p>
		</div>
		<button ion-button full (click)="closeModal();" class="correction">Alsnog doorgaan</button>
		<button ion-button full (click)="goHome()" class="correction">Terug naar homepagina</button>
	</div>
</div>