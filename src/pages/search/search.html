<ion-header>
	<ion-navbar>
		<button ion-button menuToggle>
			<ion-icon name='menu'></ion-icon>
		</button>
		<ion-title>
			<img src="http://timmerdorp.com/img/ding.svg" align="middle" class="nav-logo">
		</ion-title>
	</ion-navbar>
</ion-header>

<ion-content padding>
	<div class="user-info">
		<span style="color:red;">
			{{error}}
		</span>
		<div *ngIf="loading">
			even wachten...
		</div>
	</div>
	<div class="container">
		<div class="bracelet-number">
			<h1>Zoek kind:</h1>
			<span class="search-on">Zoek op naam, armbandnummer of hutnummer</span>
			<ion-input type="text" [(ngModel)]="searchTerm" (ngModelChange)="search($event)"></ion-input>
		</div>
	</div>
	<div *ngFor="let child of tickets">
		<button ion-button full (click)="showModal(child)" class="bg-grey color-mediumBlack">
			{{ child.meta.fooevents_custom_voornaam[0] }} {{ child.meta.fooevents_custom_achternaam[0] }} {{ child.meta.wristband ||
			'-' }} 
			<span *ngIf="child.meta.hutnr && child.meta.hutnr[0][0] === '0'" style="background-color:yellow;"> {{ child.meta.hutnr }}</span>
			<span *ngIf="child.meta.hutnr && child.meta.hutnr[0][0] === '1'" style="background-color:red;"> {{ child.meta.hutnr }}</span>
			<span *ngIf="child.meta.hutnr && child.meta.hutnr[0][0] === '2'" style="background-color:blue;"> {{ child.meta.hutnr }}</span>
			<span *ngIf="child.meta.hutnr && child.meta.hutnr[0][0] === '3'" style="background-color:green;"> {{ child.meta.hutnr }}</span>
		</button>
	</div>

	<!-- start modal box -->
	<div *ngIf="modal.showModal" id="myModal" class="modal">
		<div class="modal-content">
			<span class="close" (click)="modal.showModal = false;">&times;</span>
			<ul>
				<li>voornaam: {{ modal.child.meta.fooevents_custom_voornaam[0] }}</li>
				<li>achternaam: {{ modal.child.meta.fooevents_custom_achternaam[0] }}</li>
				<li>{{ modal.child.meta['fooevents_custom_geboortedatum_(dd-mm-jjjj)'][0] }}</li>
				<li>{{ modal.child.meta.fooevents_custom_naam_huisarts[0] }}</li>
				<li>{{ modal.child.meta['fooevents_custom_opmerkingen,_allergien'][0] }}</li>
				<li><a href="tel: {{ modal.child.meta.fooevents_custom_telefoonnr_huisarts[0] }}">{{ modal.child.meta.fooevents_custom_telefoonnr_huisarts[0] }}</a></li>
				<li><a href="tel: {{ modal.child.meta.fooevents_custom_telefoonnr_ouders[0] }}">{{ modal.child.meta.fooevents_custom_telefoonnr_ouders[0] }}</a></li>
				<li><a href="tel: {{ modal.child.meta['fooevents_custom_telefoonnr_ouders_(2)'][0] }}">{{ modal.child.meta['fooevents_custom_telefoonnr_ouders_(2)'][0] }}</a></li>
				<li>{{ modal.child.meta.WooCommerceEventsPurchaserEmail[0] }}</li>
				<li *ngIf="modal.child.meta.wristband">bandje: {{ modal.child.meta.wristband[0] }}</li>
				<li *ngIf="modal.child.meta.hutnr">hut: {{ modal.child.meta.hutnr[0] }}</li>
				<li *ngIf="modal.child.meta.present_wed">aanwezig woensdag</li>
				<li *ngIf="!modal.child.meta.present_wed">afwezig woensdag</li>
			</ul>
			
			<button ion-button full (click)="modal.showModal = false;" class="bg-green correction">Ok</button>
			<button ion-button full (click)="scanChild(modal.child.meta.WooCommerceEventsTicketID[0])" class="bg-yellow correction">Scan</button>
			<button ion-button full (click)="goBack()" class="bg-red correction">Terug naar home</button>
		</div>
	</div>
</ion-content>
